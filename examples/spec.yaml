repo: https://github.com/owner/repo.git
base_ref: main
image: ubuntu:24.04

defaults:
  cpus: "2"
  memory: 4g
  pids_limit: 256
  needs_network: false
  auto_commit: true
  read_only_rootfs: false
  commit_prefix: agent

review:
  required_checks:
    - "git diff --check"

agents:
  - name: format-check
    cmd: |
      git status --short > /out/status.txt
      echo '{"status":"no_change","summary":"no code changes","checks":[],"artifacts":["status.txt"]}' > /out/result.json

  - name: add-run-note
    cmd: |
      printf "\nRun: $RUN_ID\n" >> AGENT_RUN_NOTE.txt
      echo '{"status":"ok","summary":"added AGENT_RUN_NOTE.txt update","checks":[],"artifacts":[]}' > /out/result.json
